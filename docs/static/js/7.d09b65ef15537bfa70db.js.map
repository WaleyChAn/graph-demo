{"version":3,"sources":["webpack:///src/views/demo/pages/chart_1_n.vue","webpack:///./src/views/demo/pages/chart_1_n.vue?f19d","webpack:///./src/views/demo/pages/chart_1_n.vue"],"names":["chart_1_n","name","data","myChart","dataUrl","dataPath","dataCount","dataMenu","dataSelected","defaultProps","children","label","isMenuShow","isFilterStop","activeName","tabsList","url","watch","val","this","find","item","initChart","mounted","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","chartDom","_ref","filterLayer","other","option","wrap","_context","prev","next","document","getElementById","echarts","showLoading","axios_default","get","sent","filterData","objectWithoutProperties_default","series","type","nodeClick","center","radius","sort","undefined","itemStyle","borderWidth","fontSize","emphasis","focus","levels","rotate","setOption","on","handleChartClick","hideLoading","stop","params","treePathInfo","startAngle","value","layerIndex","isLeaf","newData","length","opt","extends_default","handleCrumbsClick","chartId","filterTarget","index","findIndex","slice","setChartByTarget","handleLayerItemClick","onPopoverHide","chartLayer","_this2","arguments","layer","_data$name","_data$children","procedureId","count","result","replace","Object","uuid","map","position","padding","silent","_this3","target","_data$children2","color","_this4","id","_data$children3","forEach","handleLeafSelected","_this5","targetId","getChildren","hasFound","fn","Array","isArray","pages_chart_1_n","render","_vm","_h","$createElement","_c","_self","staticClass","class","show","_l","key","_v","_s","child","has-child","active","mouseenter","$event","ref","refInFor","attrs","disabled","popper-class","placement","trigger","hide","props","indent","default-expand-all","_e","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.d09b65ef15537bfa70db.js","sourcesContent":["<template>\n  <div class=\"layout-flex column\">\n    <div class=\"layout-flex-l chart-wrapper\">\n      <div class=\"chart-menu layered\"\n           :class=\"{'show': isMenuShow}\">\n        <!-- <div class=\"menu-line\"></div> -->\n        <div class=\"menu-content\">\n          <div v-for=\"item in dataMenu\"\n               :key=\"`p-${item.chartId}`\"\n               class=\"layered-content layout-flex column\">\n            <div class=\"layered-name layout-flex-s\">{{ item.name }}</div>\n            <div class=\"layered-list layout-flex-l\">\n              <div v-for=\"child in item.children\"\n                   :key=\"child.chartId\"\n                   class=\"layered-item\"\n                   :class=\"{'has-child': child.children && child.children.length > 0, 'active': child.chartId === dataSelected.chartId}\"\n                   @mouseenter=\"handleLayerItemClick(child)\">\n                <el-popover ref=\"popover\"\n                            :disabled=\"!(child.children && child.children.length > 0)\"\n                            popper-class=\"layered-popover\"\n                            placement=\"right\"\n                            trigger=\"hover\"\n                            @hide=\"onPopoverHide(child)\">\n                  <div class=\"chart-menu-tree\">\n                    <el-tree v-if=\"child.children && child.children.length > 0\"\n                             :data=\"[child]\"\n                             :props=\"defaultProps\"\n                             :indent=\"0\"\n                             default-expand-all></el-tree>\n                  </div>\n                  <div slot=\"reference\">\n                    <i v-if=\"child.children && child.children.length > 0\"\n                       class=\"el-icon-arrow-right\"></i>\n                    {{ child.name }}\n                  </div>\n                </el-popover>\n              </div>\n            </div>\n          </div>\n          <!-- <template v-for=\"item in dataMenu\">\n            <div v-if=\"dataSelected.chartId\"\n                 :key=\"`c-${item.chartId}`\"\n                 class=\"layered-menu\">\n              <div class=\"layered-menu-wrapper\">\n                <div v-for=\"child in item.children\"\n                     :key=\"child.chartId\"\n                     class=\"layered-menu-item\"\n                     :class=\"{'show': child.chartId === dataSelected.chartId}\">\n                  <el-tree :data=\"[child]\"\n                           :props=\"defaultProps\"\n                           :indent=\"0\"\n                           default-expand-all></el-tree>\n                </div>\n              </div>\n            </div>\n          </template> -->\n\n          <!-- <el-tree :data=\"dataMenu\"\n                   :props=\"defaultProps\"\n                   :indent=\"0\"\n                   default-expand-all></el-tree> -->\n        </div>\n      </div>\n      <div class=\"chart\"\n           id=\"chart\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts'\nimport axios from 'axios'\n// import { v4 as uuidv4 } from 'uuid'\nimport { getUuid } from '@/utils/uuid'\n\nexport default {\n  name: 'Chart',\n  data () {\n    return {\n      myChart: null,\n      dataUrl: 'static/data/data_3.json',\n      data: {},\n      dataPath: [],\n      dataCount: [],\n      dataMenu: [],\n      dataSelected: {},\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      },\n      isMenuShow: false,\n      isFilterStop: false,\n      activeName: '党群工作部',\n      tabsList: [\n        {\n          label: '党群工作部',\n          name: '1',\n          url: 'static/data/data_1.json'\n        },\n        {\n          label: '整体管理',\n          name: '2',\n          url: 'static/data/data_2.json'\n        },\n        {\n          label: '公司地图',\n          name: '3',\n          url: 'static/data/data_3.json'\n        }\n      ]\n    }\n  },\n  watch: {\n    activeName (val) {\n      this.dataUrl = this.tabsList.find(item => item.label === val).url\n      this.initChart()\n    }\n  },\n  mounted () {\n    this.initChart()\n  },\n  methods: {\n    async initChart () {\n      const chartDom = document.getElementById('chart')\n      this.myChart = echarts.init(chartDom)\n      this.myChart.showLoading()\n\n      const { data } = await axios.get(this.dataUrl)\n      this.data = this.filterData(data)\n\n      const filterLayer = this.filterLayer(this.data, 2)\n      const { children, ...other } = filterLayer\n\n      this.dataPath = [other]\n      const option = {\n        series: {\n          type: 'sunburst',\n          data: filterLayer.children,\n          nodeClick: false,\n          center: ['50%', '50%'],\n          radius: ['10%', '80%'],\n          sort: undefined,\n          itemStyle: {\n            borderWidth: 2\n          },\n          label: {\n            fontSize: 12\n          },\n          emphasis: {\n            focus: 'ancestor'\n          },\n          levels: [\n            {\n\n            },\n            {\n              radius: ['10%', '40%'],\n              label: {\n                rotate: 'tangential'\n              }\n            },\n            {\n              radius: ['40%', '80%']\n            }\n          ]\n        }\n      }\n\n      this.myChart.setOption(option)\n      this.myChart.on('click', this.handleChartClick)\n      this.myChart.hideLoading()\n    },\n    handleChartClick (params) {\n      const { treePathInfo, data } = params\n      const leafLength = treePathInfo[0].value\n      const { layerIndex, isLeaf } = data\n      const unitAngle = 360 / leafLength\n\n      const startAngle = unitAngle * (layerIndex - 0.5)\n\n      if (isLeaf) {\n        this.dataMenu = []\n        this.dataSelected = {}\n        const newData = this.filterLayer(this.data, 2, data)\n        this.isMenuShow = this.dataMenu.length > 0\n        let opt = {}\n        if (this.isMenuShow) {\n          opt = {\n            center: ['25%', '50%']\n            // radius: ['0', '70%'],\n            // label: {\n            //   fontSize: 10\n            // },\n            // levels: [\n            //   {\n\n            //   },\n            //   {\n            //     radius: ['5%', '25%'],\n            //     label: {\n            //       rotate: 'tangential'\n            //     }\n            //   },\n            //   {\n            //     radius: ['25%', '60%']\n            //   }\n            // ]\n          }\n        } else {\n          opt = {\n            center: ['50%', '50%']\n            // radius: ['0', '80%'],\n            // label: {\n            //   fontSize: 12\n            // },\n            // levels: [\n            //   {\n\n            //   },\n            //   {\n            //     radius: ['10%', '40%'],\n            //     label: {\n            //       rotate: 'tangential'\n            //     }\n            //   },\n            //   {\n            //     radius: ['40%', '80%']\n            //   }\n            // ]\n          }\n        }\n        this.myChart.setOption({\n          series: {\n            ...opt,\n            startAngle: startAngle,\n            data: newData.children\n          }\n        })\n      }\n    },\n    handleCrumbsClick (params) {\n      const { chartId } = params\n      const data = this.filterTarget(this.data, chartId)\n      const index = this.dataPath.findIndex(item => item.chartId === chartId)\n      if (index === this.dataPath.length - 1) {\n        return false\n      } else {\n        if (data) {\n          const { children } = data\n          if (children && children.length > 0) {\n            this.dataPath = this.dataPath.slice(0, index + 1)\n            this.setChartByTarget(data)\n          }\n        }\n      }\n    },\n    handleLayerItemClick (item) {\n      if (item.children && item.children.length > 0) {\n        this.dataSelected = item\n      } else {\n        this.dataSelected = {}\n      }\n    },\n    onPopoverHide (item) {\n      if (item.chartId === this.dataSelected.chartId) {\n        this.dataSelected = {}\n      }\n    },\n    setChartByTarget (data) {\n      const { chartLayer } = data\n      const filterLayer = this.filterLayer(data, chartLayer + 2)\n      this.myChart.setOption({\n        series: {\n          data: filterLayer.children\n        }\n      })\n    },\n    filterData (data = {}, layer = 0) {\n      const { name = '', children = [], procedureId } = data\n      this.dataCount[layer] = this.dataCount[layer] ? this.dataCount[layer] + 1 : 1\n      let count = this.dataCount[layer]\n      const result = {\n        name: name.replace('<br>', '\\n'),\n        chartId: `chart-${getUuid()}`,\n        chartLayer: layer,\n        layerIndex: count,\n        procedureId,\n        children: children && children.map(item => {\n          return this.filterData(item, layer + 1)\n        })\n      }\n      if (children && children.length === 0 && procedureId) {\n        result.value = 1\n        result.label = {\n          position: 'outside',\n          padding: 3,\n          silent: false\n        }\n      }\n      return result\n    },\n    filterLayer (data = {}, layer, target = null) {\n      if (!layer) {\n        return data\n      } else {\n        const { children = [], chartLayer, ...other } = data\n        const result = {\n          ...other,\n          chartLayer\n        }\n        if (chartLayer < layer) {\n          if (children && children.length > 0) {\n            result.children = children.map(item => {\n              return this.filterLayer(item, layer, target)\n            })\n          }\n        } else {\n          // result.value = children && children.length > 0 ? children.length : 1\n          result.value = 1\n          result.isLeaf = true\n          if (result.procedureId) {\n            result.label = {\n              position: 'outside',\n              padding: 3,\n              silent: false\n            }\n          }\n          if (target && target.chartId === result.chartId) {\n            result.itemStyle = {\n              color: '#004e9f'\n            }\n            if (children && children.length > 0) {\n              this.dataMenu = [{\n                ...result,\n                children: children && children.map(item => {\n                  return this.filterLayer(item, 100)\n                })\n              }]\n            }\n          }\n        }\n        return result\n      }\n    },\n    filterTarget (data = {}, id) {\n      const { children = [], chartId } = data\n      let result = null\n      if (chartId === id) {\n        result = {\n          ...data\n        }\n      } else if (children) {\n        children.forEach(item => {\n          const target = this.filterTarget(item, id)\n          if (target) {\n            result = target\n          }\n        })\n      }\n      return result\n    },\n    handleLeafSelected (data = {}, target = {}, layer) {\n      if (!layer) {\n        return data\n      } else {\n        const { children, chartId, chartLayer, ...other } = data\n        const { chartId: targetId } = target\n        const result = {\n          ...other,\n          chartLayer,\n          chartId\n        }\n        if (chartLayer < layer) {\n          if (children && children.length > 0) {\n            result.children = children.map(item => {\n              return this.filterLayer(item, layer)\n            })\n          }\n        } else if (targetId === chartId) {\n          // result.value = children && children.length > 0 ? children.length : 1\n          result.value = 1\n          result.isLeaf = true\n        }\n        if (targetId === chartId) {\n          result.itemStyle = {\n            color: '#004e9f'\n          }\n        } else if (chartLayer < layer) {\n          result.children = children && children.map(item => {\n            return this.handleLeafSelected(item, target)\n          })\n        }\n        return result\n      }\n    },\n    getChildren (data, layer) {\n      var hasFound = false\n      var result = null\n      var fn = function (data) {\n        if (Array.isArray(data) && !hasFound) {\n          data.forEach(item => {\n            if (item.chartLayer === layer) {\n              result = item\n              hasFound = true\n            } else if (item.children) {\n              fn(item.children)\n            }\n          })\n        }\n      }\n      fn(data)\n      return result\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/demo/pages/chart_1_n.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout-flex column\"},[_c('div',{staticClass:\"layout-flex-l chart-wrapper\"},[_c('div',{staticClass:\"chart-menu layered\",class:{'show': _vm.isMenuShow}},[_c('div',{staticClass:\"menu-content\"},_vm._l((_vm.dataMenu),function(item){return _c('div',{key:(\"p-\" + (item.chartId)),staticClass:\"layered-content layout-flex column\"},[_c('div',{staticClass:\"layered-name layout-flex-s\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('div',{staticClass:\"layered-list layout-flex-l\"},_vm._l((item.children),function(child){return _c('div',{key:child.chartId,staticClass:\"layered-item\",class:{'has-child': child.children && child.children.length > 0, 'active': child.chartId === _vm.dataSelected.chartId},on:{\"mouseenter\":function($event){return _vm.handleLayerItemClick(child)}}},[_c('el-popover',{ref:\"popover\",refInFor:true,attrs:{\"disabled\":!(child.children && child.children.length > 0),\"popper-class\":\"layered-popover\",\"placement\":\"right\",\"trigger\":\"hover\"},on:{\"hide\":function($event){return _vm.onPopoverHide(child)}}},[_c('div',{staticClass:\"chart-menu-tree\"},[(child.children && child.children.length > 0)?_c('el-tree',{attrs:{\"data\":[child],\"props\":_vm.defaultProps,\"indent\":0,\"default-expand-all\":\"\"}}):_vm._e()],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"reference\"},slot:\"reference\"},[(child.children && child.children.length > 0)?_c('i',{staticClass:\"el-icon-arrow-right\"}):_vm._e(),_vm._v(\"\\n                  \"+_vm._s(child.name)+\"\\n                \")])])],1)}),0)])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"chart\",attrs:{\"id\":\"chart\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dc0e2538\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/demo/pages/chart_1_n.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chart_1_n.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chart_1_n.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dc0e2538\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chart_1_n.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/demo/pages/chart_1_n.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}