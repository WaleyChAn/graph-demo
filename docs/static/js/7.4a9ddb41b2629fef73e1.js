webpackJsonp([7],{ReYc:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("Dd8w"),n=e.n(r),i=e("Xxa5"),l=e.n(i),d=e("+6Bu"),h=e.n(d),s=e("exGp"),c=e.n(s),u=e("XLwt"),o=e("mtWM"),f=e.n(o),v=e("P0XF"),m={name:"Chart",data:function(){return{myChart:null,dataUrl:"static/data/data_3.json",data:{},dataPath:[],dataCount:[],dataMenu:[],dataSelected:{},defaultProps:{children:"children",label:"name"},isMenuShow:!1,isFilterStop:!1,activeName:"党群工作部",tabsList:[{label:"党群工作部",name:"1",url:"static/data/data_1.json"},{label:"整体管理",name:"2",url:"static/data/data_2.json"},{label:"公司地图",name:"3",url:"static/data/data_3.json"}]}},watch:{activeName:function(t){this.dataUrl=this.tabsList.find(function(a){return a.label===t}).url,this.initChart()}},mounted:function(){this.initChart()},methods:{initChart:function(){var t=this;return c()(l.a.mark(function a(){var e,r,n,i,d,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=document.getElementById("chart"),t.myChart=u.b(e),t.myChart.showLoading(),a.next=5,f.a.get(t.dataUrl);case 5:r=a.sent,n=r.data,t.data=t.filterData(n),i=t.filterLayer(t.data,2),i.children,d=h()(i,["children"]),t.dataPath=[d],s={series:{type:"sunburst",data:i.children,nodeClick:!1,center:["50%","50%"],radius:["10%","95%"],sort:void 0,itemStyle:{borderWidth:2},emphasis:{focus:"ancestor"}}},t.myChart.setOption(s),t.myChart.on("click",t.handleChartClick),t.myChart.hideLoading();case 15:case"end":return a.stop()}},a,t)}))()},handleChartClick:function(t){var a=t.treePathInfo,e=t.data,r=360/a[0].value*(e.layerIndex-.5);if(e.isLeaf){this.dataMenu=[];var n=this.filterLayer(this.data,2,e);this.isMenuShow=this.dataMenu.length>0,this.myChart.setOption({series:{center:this.dataMenu.length>0?["30%","50%"]:["50%","50%"],startAngle:r,data:n.children}})}},handleCrumbsClick:function(t){var a=t.chartId,e=this.filterTarget(this.data,a),r=this.dataPath.findIndex(function(t){return t.chartId===a});if(r===this.dataPath.length-1)return!1;if(e){var n=e.children;n&&n.length>0&&(this.dataPath=this.dataPath.slice(0,r+1),this.setChartByTarget(e))}},setChartByTarget:function(t){var a=t.chartLayer,e=this.filterLayer(t,a+2);this.myChart.setOption({series:{data:e.children}})},filterData:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=a.name,n=void 0===r?"":r,i=a.children,l=void 0===i?[]:i,d=a.procedureId;this.dataCount[e]=this.dataCount[e]?this.dataCount[e]+1:1;var h=this.dataCount[e],s={name:n.replace("<br>","\n"),chartId:"chart-"+Object(v.a)(),chartLayer:e,layerIndex:h,procedureId:d,children:l&&l.map(function(a){return t.filterData(a,e+1)})};return l&&0===l.length&&d&&(s.value=1,s.label={position:"outside",padding:3,silent:!1}),s},filterLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,e=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){var i=t.children,l=void 0===i?[]:i,d=t.chartLayer,s=h()(t,["children","chartLayer"]),c=n()({},s,{chartLayer:d});return d<e?l&&l.length>0&&(c.children=l.map(function(t){return a.filterLayer(t,e,r)})):(c.value=1,c.isLeaf=!0,c.procedureId&&(c.label={position:"outside",padding:3,silent:!1}),r&&r.chartId===c.chartId&&(c.itemStyle={color:"#004e9f"},l&&l.length>0&&(this.dataMenu=[n()({},c,{children:l&&l.map(function(t){return a.filterLayer(t,100)})})]))),c}return t},filterTarget:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],r=a.children,i=void 0===r?[]:r,l=null;return a.chartId===e?l=n()({},a):i&&i.forEach(function(a){var r=t.filterTarget(a,e);r&&(l=r)}),l},handleLeafSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if(r){var i=t.children,l=t.chartId,d=t.chartLayer,s=h()(t,["children","chartId","chartLayer"]),c=e.chartId,u=n()({},s,{chartLayer:d,chartId:l});return d<r?i&&i.length>0&&(u.children=i.map(function(t){return a.filterLayer(t,r)})):c===l&&(u.value=1,u.isLeaf=!0),c===l?u.itemStyle={color:"#004e9f"}:d<r&&(u.children=i&&i.map(function(t){return a.handleLeafSelected(t,e)})),u}return t},getChildren:function(t,a){var e=!1,r=null;return function t(n){Array.isArray(n)&&!e&&n.forEach(function(n){n.chartLayer===a?(r=n,e=!0):n.children&&t(n.children)})}(t),r}}},y={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"layout-flex column"},[a("div",{staticClass:"layout-flex-l chart-wrapper"},[a("div",{staticClass:"chart-menu",class:{show:this.isMenuShow}},[a("div",{staticClass:"menu-line"}),this._v(" "),a("div",{staticClass:"menu-content"},[a("el-tree",{attrs:{data:this.dataMenu,props:this.defaultProps,indent:0,"default-expand-all":""}})],1)]),this._v(" "),a("div",{staticClass:"chart",attrs:{id:"chart"}})])])},staticRenderFns:[]},p=e("VU/8")(m,y,!1,null,null,null);a.default=p.exports}});
//# sourceMappingURL=7.4a9ddb41b2629fef73e1.js.map