{"version":3,"sources":["webpack:///src/views/demo/pages/chart_1.vue","webpack:///./src/views/demo/pages/chart_1.vue?832f","webpack:///./src/views/demo/pages/chart_1.vue"],"names":["chart_1","name","data","myChart","dataUrl","dataPath","isFilterStop","activeName","tabsList","label","url","watch","val","this","find","item","initChart","mounted","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","chartDom","_ref","filterLayer","other","option","wrap","_context","prev","next","document","getElementById","echarts","showLoading","axios_default","get","sent","filterData","children","objectWithoutProperties_default","series","type","radius","sort","undefined","itemStyle","borderWidth","emphasis","focus","setOption","on","handleChartClick","hideLoading","stop","params","chartId","filterTarget","length","push","setChartByTarget","handleCrumbsClick","index","findIndex","slice","chartLayer","_this2","arguments","layer","_data$name","_data$children","procedureId","result","replace","Object","uuid","map","value","position","padding","silent","_this3","_data$children2","extends_default","_this4","id","_data$children3","forEach","target","getChildren","hasFound","fn","Array","isArray","pages_chart_1","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","model","callback","$$v","expression","_l","key","_v","_s","staticStyle","justify-content","constId","cursor","font-size","click","$event","_e","_m","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/8.0b183f2c50df3e48db1f.js","sourcesContent":["<template>\n  <div class=\"layout-flex column\">\n    <div class=\"layout-flex-s pb-xs\">\n      <div class=\"layout-flex align-center justify-center \">\n        <div class=\"layout-flex-s\">\n          <el-radio-group v-model=\"activeName\"\n                          size=\"small\">\n            <el-radio-button v-for=\"item in tabsList\"\n                             :key=\"item.name\"\n                             :label=\"item.label\">\n              {{ item.label }}\n            </el-radio-button>\n          </el-radio-group>\n        </div>\n        <div class=\"layout-flex-l\">\n          <div class=\"layout-flex align-center\"\n               style=\"justify-content: right;\">\n            <span v-for=\"(item, index) in dataPath\"\n                  :key=\"item.constId\"\n                  @click=\"handleCrumbsClick(item)\"\n                  style=\"cursor: pointer; font-size: 14px;\">\n              <i v-if=\"index > 0\"\n                 class=\"el-icon-arrow-right\"></i>\n              {{ item.name }}\n            </span>\n          </div>\n        </div>\n        <div class=\"layout-flex-s\">\n          <div class=\"layout-flex justfiy-center pl-xs\">\n            <i class=\"el-icon-location-outline\"></i>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"layout-flex-l\">\n      <div class=\"chart\"\n           id=\"chart\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts'\nimport axios from 'axios'\n// import { v4 as uuidv4 } from 'uuid'\nimport { getUuid } from '@/utils/uuid'\n\nexport default {\n  name: 'Chart',\n  data () {\n    return {\n      myChart: null,\n      dataUrl: 'static/data/data_1.json',\n      data: {},\n      dataPath: [],\n      isFilterStop: false,\n      activeName: '党群工作部',\n      tabsList: [\n        {\n          label: '党群工作部',\n          name: '1',\n          url: 'static/data/data_1.json'\n        },\n        {\n          label: '整体管理',\n          name: '2',\n          url: 'static/data/data_2.json'\n        },\n        {\n          label: '公司地图',\n          name: '3',\n          url: 'static/data/data_3.json'\n        }\n      ]\n    }\n  },\n  watch: {\n    activeName (val) {\n      this.dataUrl = this.tabsList.find(item => item.label === val).url\n      this.initChart()\n    }\n  },\n  mounted () {\n    this.initChart()\n  },\n  methods: {\n    async initChart () {\n      const chartDom = document.getElementById('chart')\n      this.myChart = echarts.init(chartDom)\n      this.myChart.showLoading()\n\n      const { data } = await axios.get(this.dataUrl)\n      this.data = this.filterData(data)\n\n      const filterLayer = this.filterLayer(this.data, 2)\n      const { children, ...other } = filterLayer\n\n      this.dataPath = [other]\n      const option = {\n        series: {\n          type: 'sunburst',\n          data: filterLayer.children,\n          // nodeClick: false,\n          radius: ['10%', '80%'],\n          sort: undefined,\n          itemStyle: {\n            // borderRadius: 7,\n            borderWidth: 2\n          },\n          emphasis: {\n            focus: 'ancestor'\n          }\n        }\n      }\n\n      this.myChart.setOption(option)\n      this.myChart.on('click', this.handleChartClick)\n      this.myChart.hideLoading()\n    },\n    handleChartClick (params) {\n      const { chartId } = params.data\n      const data = this.filterTarget(this.data, chartId)\n      if (data) {\n        const { children, ...other } = data\n        if (children && children.length > 0) {\n          this.dataPath.push(other)\n          this.setChartByTarget(data)\n        }\n      }\n    },\n    handleCrumbsClick (params) {\n      const { chartId } = params\n      const data = this.filterTarget(this.data, chartId)\n      const index = this.dataPath.findIndex(item => item.chartId === chartId)\n      if (index === this.dataPath.length - 1) {\n        return false\n      } else {\n        if (data) {\n          const { children } = data\n          if (children && children.length > 0) {\n            this.dataPath = this.dataPath.slice(0, index + 1)\n            this.setChartByTarget(data)\n          }\n        }\n      }\n    },\n    setChartByTarget (data) {\n      const { chartLayer } = data\n      const filterLayer = this.filterLayer(data, chartLayer + 2)\n      this.myChart.setOption({\n        series: {\n          data: filterLayer.children\n        }\n      })\n    },\n    filterData (data = {}, layer = 0) {\n      const { name = '', children = [], procedureId } = data\n\n      const result = {\n        name: name.replace('<br>', '\\n'),\n        chartId: `chart-${getUuid()}`,\n        chartLayer: layer,\n        procedureId,\n        children: children && children.map(item => {\n          return this.filterData(item, layer + 1)\n        })\n      }\n      if (children && children.length === 0 && procedureId) {\n        result.value = 1\n        result.label = {\n          position: 'outside',\n          padding: 3,\n          silent: false\n        }\n      }\n      return result\n    },\n    filterLayer (data = {}, layer) {\n      if (!layer) {\n        return data\n      } else {\n        const { children = [], chartLayer, ...other } = data\n        const result = {\n          ...other,\n          chartLayer\n        }\n        if (chartLayer < layer) {\n          if (children && children.length > 0) {\n            result.children = children.map(item => {\n              return this.filterLayer(item, layer)\n            })\n          }\n        } else {\n          result.value = children && children.length > 0 ? children.length : 1\n          if (result.procedureId) {\n            result.label = {\n              position: 'outside',\n              padding: 3,\n              silent: false\n            }\n          }\n        }\n        return result\n      }\n    },\n    filterTarget (data = {}, id) {\n      const { children = [], chartId } = data\n      let result = null\n      if (chartId === id) {\n        result = {\n          ...data\n        }\n      } else if (children) {\n        children.forEach(item => {\n          const target = this.filterTarget(item, id)\n          if (target) {\n            result = target\n          }\n        })\n      }\n      return result\n    },\n    getChildren (data, layer) {\n      var hasFound = false\n      var result = null\n      var fn = function (data) {\n        if (Array.isArray(data) && !hasFound) {\n          data.forEach(item => {\n            if (item.chartLayer === layer) {\n              result = item\n              hasFound = true\n            } else if (item.children) {\n              fn(item.children)\n            }\n          })\n        }\n      }\n      fn(data)\n      return result\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/demo/pages/chart_1.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout-flex column\"},[_c('div',{staticClass:\"layout-flex-s pb-xs\"},[_c('div',{staticClass:\"layout-flex align-center justify-center\"},[_c('div',{staticClass:\"layout-flex-s\"},[_c('el-radio-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},_vm._l((_vm.tabsList),function(item){return _c('el-radio-button',{key:item.name,attrs:{\"label\":item.label}},[_vm._v(\"\\n            \"+_vm._s(item.label)+\"\\n          \")])}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"layout-flex-l\"},[_c('div',{staticClass:\"layout-flex align-center\",staticStyle:{\"justify-content\":\"right\"}},_vm._l((_vm.dataPath),function(item,index){return _c('span',{key:item.constId,staticStyle:{\"cursor\":\"pointer\",\"font-size\":\"14px\"},on:{\"click\":function($event){return _vm.handleCrumbsClick(item)}}},[(index > 0)?_c('i',{staticClass:\"el-icon-arrow-right\"}):_vm._e(),_vm._v(\"\\n            \"+_vm._s(item.name)+\"\\n          \")])}),0)]),_vm._v(\" \"),_vm._m(0)])]),_vm._v(\" \"),_vm._m(1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout-flex-s\"},[_c('div',{staticClass:\"layout-flex justfiy-center pl-xs\"},[_c('i',{staticClass:\"el-icon-location-outline\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout-flex-l\"},[_c('div',{staticClass:\"chart\",attrs:{\"id\":\"chart\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41bd5818\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/demo/pages/chart_1.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chart_1.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chart_1.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41bd5818\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chart_1.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/demo/pages/chart_1.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}